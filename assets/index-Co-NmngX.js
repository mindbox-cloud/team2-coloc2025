(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(t){if(t.ep)return;t.ep=!0;const c=n(t);fetch(t.href,c)}})();function g(o,r,n,e){const c=[{xStart:0,yStart:0},{xStart:e-1,yStart:0},{xStart:0,yStart:e-1},{xStart:e-1,yStart:e-1}][r];let l=0;for(let i=0;i<e&&l<o.size;i++)for(let s=0;s<e&&l<o.size;s++){const a=c.xStart+(r%2===0?i:-i),u=c.yStart+(r<2?s:-s);a>=0&&a<e&&u>=0&&u<e&&!n[u][a]&&(n[u][a]={army:o,currentHp:o.hp},l++)}}function y(o){const{fieldSize:r,armies:n}=o,e=Array.from({length:r},()=>Array.from({length:r},()=>null));return n.forEach((t,c)=>{g(t,c,e,r)}),{state:e,makeTurn(){console.log("сделали шаг")}}}const f="game-field";function h(o){const r=document.createElement("div");r.classList.add("field-root"),r.style.setProperty("--n",o.toString()),r.id=f;for(let n=0;n<o;n++)for(let e=0;e<o;e++){const t=document.createElement("div");t.classList.add("field-cell"),r.append(t)}return r}function E(o,r){const n=document.getElementById(f);if(n&&n.style.getPropertyValue("--n")===o.toString())return n;n==null||n.remove();const e=h(o);return r.append(e),e}function m(o,r){const n=E(o.length,r);for(let e=0;e<o.length;e++)for(let t=0;t<o[e].length;t++){const c=n.children[e*o.length+t],l=o[e][t];c.style.backgroundColor=l?l.army.color:"white"}}const p=document.getElementById("app"),d=y({fieldSize:10,armies:[{size:4,hp:50,strength:1,visionLength:3,criticalPercent:10,color:"blue"},{size:7,hp:50,strength:1,visionLength:3,criticalPercent:10,color:"red"}]});m(d.state,p);setInterval(()=>{d.makeTurn(),m(d.state,p)},500);
